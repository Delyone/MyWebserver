# 编码质量学习目标
## 一、回答下面的问题

------

### 问题1 ：相对于 #define ,使用 const 对象与 enums 有什么好处？
* const对象有数据类型，编译器可以进行类型检查，宏定义没有类型检查，在字符替换可能会产生意料不到的错误；const可节省空间，避免不必要的内存分配，提高效率。
* enums使程序更容易维护，因为枚举常量是由编译程序自动生成的，而标识符常量必须由程序员手工赋值；使程序调试起来更方便；枚举是类型安全的。

------
### 问题2  ：const 关键字的意义?
* 只要一个变量前用const来修饰，就意味着该变量里的数据只能被访问，而不能被修改，也就是意味着const“只读”； 使编译器保护那些不希望被修改的参数，可以预防其它代码无意识的进行修改，从而提高了程序的健壮性。

------
### 问题3  :  对象是否一定要初始化，初始化的意义是什么？
* 是。初始化是指创建变量时赋予其一个初始值，相当于将对象实例化并占用内存空间，使用未初始化的数据可能会导致程序不正常运作。

------
### 问题 4 : 创建一个空类，会包含哪些函数?
* 默认构造函数、拷贝构造函数、析构函数、拷贝赋值运算符

------
### 问题 5 : 在多态中,析构函数为什么要声明成 virtual?
* 当一个基类指针指向一个子类对象时，若基类的析构函数不是virtual的，那么在delete基类指针时，只会释放基类对象的资源，不会释放子类对象的资源，从而造成内存泄露。故任何带有virtual函数的类都应该有一个virtual析构函数。

------
### 问题 6 : 在析构函数中调用一个可能失败的函数，会出现什么问题？应该如何处理? 结合 Demo 分析
* 析构函数调用可能失败的函数，程序可能结束执行或者出现不明确行为。一般有两种方法：
* 如果close抛出异常就结束程序，通过调用abort完成：

    ``` C++
    A::~A() 
    {
        try {a.func();}
        catch (…) 
        {
        //记录调用a.func()过程中出现异常
            abort();
        }
    }
    ```

* 吞下异常，当做什么都没发生过：

    ``` C++
    A::~A() 
    {
        try {a.func();}
        catch (…) 
        {
        //记录调用a.func()过程中出现异常
        }
    }
    ```

------
### 问题 7 : 在构造函数和析构函数调用 virutal 函数会产生什么后果?结合 Demo 分析
* ⼦类对象调⽤⼦类构造函数之前，会先调⽤⽗类构造函数。若⼦类᯿写了⽗类中的⼀个虚函数func()，⽗类的构造函数中调⽤了func()函数，那么当⼦类对象调⽤⽗类的构造函数执⾏到这⼀句时，会调⽤⽗类版本的func()函数。这是因为⽗类的构造函数的执⾏早于⼦类的构造函数，当⽗类的构造函数执⾏时，⼦类的成员变ᰁ尚未初始化，如果此时调⽤的虚函数下降⾄⼦类层次，会存在使⽤⼦类未初始化成员的⻛险，因此C++禁⽌这种危险。析构函数也是一样的原因。

------
### 问题 8 : 基于对象管理内存资源有什么好处？一般有哪些对象可以管理内存资源?
* 当一个对象创建的时候，自动调用构造函数，当对象超出作用域的时候会自动调用析构函数。将资源和对象的生命周期绑定，避免内存泄露。
标准程序库提供的auto_ptr、shared_ptr等智能指针或自己建立的类可以管理内存资源

------
### 问题 9 : 管理内存资源的对象可以进行拷贝吗?  比较好的拷贝逻辑应该是什么样子?
* 可以，但在复制资源管理对象的同时也要复制其包含的所有资源，即深拷贝。

------
### 问题 10 : 开发一个 "容易被正确使用，不容易 被误用"接口，首先需要考虑什么? 结合具体 Demo 分析
* 首先需要考虑使用者可能做出什么样的错误，从而设计预防措施。
例如设计一个用来表示日期的类设计构造函数：

    ``` C++
    class Date
    {
    public:
        Date(int month, int day, int year);
    …
    };
    ```
* 那么使用它的用户很容易犯下至少两个错误：
* 会以错误的次序传递参数：

    ```
    Date d(30, 3, 1995);
    ```
* 可能传递一个无效的月份或天数：

    ```
    Date d(2, 30, 1995);
    ```


------
### 问题 11 : “促进正确使用”的办法包括哪些？
* 接口的一致性、与内置类型的行为兼容。

------
### 问题 12 :   传引用比传值的好处在于哪些 ？
* 引用不是新定义一个变量，而是给已存在变量取了一个别名，编译器不会为引用变量开辟内存空间，它和它引用的变量共用同一块内存空间。故传引用可以节约空间，提高性能。

------
### 问题 13 ： 能否返回一个 局部变量的指针或者引用？为什么？
* 不能。局部变量会在函数返回后被销毁，因此被返回的指针或引用就成为了"无所指"的引用，程序会进入未知状态。

------
### 问题 14  :   能够返回一个对象成员的指针或者引用? 为什么？
* 不能。因为对象成员是局部对象，在函数退出前就被销毁了，返回指针或者引用没有意义。

------
### 问题 15 :    使用 inline 的函数的优点与缺点是什么? 适用的场景的是什么？
* 优点是对函数的每⼀个调⽤都⽤函数本体替代，调⽤不承受额外开销，编译器对其执⾏语境相关最优化。
* 缺点是增加⽬标码⼤⼩，额外的换⻚⾏为，降低缓存击中率，效率损失。
* 适用于小型、不被频繁调用的函数身上，可使日后的调试过程和二进制升级更容易，也可使潜在的代码膨胀问题最小化，使程序的速度提升机会最大化。

------
### 问题 16  ： 能够继承的两个类在 public 继承下，应具有什么关系？请举例说明?
* “is-a”（是一种）关系。令类D以public形式继承类B时，每一个类型为D的对象同时也是一个类型为B的对象，反之不成立。即B比D表现出更一般化的概念，而D比B表现出更特殊化的概念。B对象可派上用场的任何地方，D对象一样可以派上用场。例如class Student: public Person {…} 每个学生都是人，但并非每个人都是学生。

------
### 问题 17  :    有没有能够替换虚函数的设计？如果有？请说明
* non-virtual interface，以public non-virtual成员函数包裹较低访问性（private/protected）的虚函数。
* virtual函数替换成“函数指针成员变量”。
* tr1::function成员变ᰁ替换virtual。
